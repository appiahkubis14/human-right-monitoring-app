{% extends 'base/web_base.html' %}

{% block content %}
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0.0/jquery.counterup.min.js"></script>

<!-- ============================================================== -->
<!-- Start Page Content here -->
<!-- ============================================================== -->
<div class="page-content">
    <div class="page-container">
        <!-- Page Title -->
        <div class="page-title-box">
            <div class="d-flex align-items-sm-center flex-sm-row flex-column gap-2">
                <div class="flex-grow-1">
                    <h4 class="font-18 mb-0">Human Rights Monitoring Dashboard</h4>
                </div>
                <div class="text-end">
                    <ol class="breadcrumb m-0 py-0">
                        <li class="breadcrumb-item"><a href="javascript: void(0);">HRM</a></li>
                        <li class="breadcrumb-item active">Child Labor Monitoring</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="card mb-3">
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">Region</label>
                            <select class="form-select" id="regionFilter">
                                <option value="">All Regions</option>
                                <option value="Western">Western Region</option>
                                <option value="Ashanti">Ashanti Region</option>
                                <option value="Eastern">Eastern Region</option>
                                <option value="Central">Central Region</option>
                                <option value="Volta">Volta Region</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">Communities</label>
                            <select class="form-select" id="communityFilter">
                                <option value="">All Communities</option>
                            </select>
                                
                        </div>
                    </div>
                    <!-- <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">Risk Level</label>
                            <select class="form-select" id="riskFilter">
                                <option value="">All Levels</option>
                                <option value="Low">Low Risk</option>
                                <option value="Medium">Medium Risk</option>
                                <option value="High">High Risk</option>
                                <option value="Critical">Critical Risk</option>
                            </select>
                        </div>
                    </div> -->
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">Time Period</label>
                            <select class="form-select" id="timeFilter">
                                <option value="7">Last 7 Days</option>
                                <option value="30" selected>Last 30 Days</option>
                                <option value="90">Last 90 Days</option>
                                <option value="365">Last Year</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>
                        
                        <!-- Custom Date Range Picker (initially hidden) -->
                        <div class="mb-3 custom-date-range" style="display: none;">
                            <label class="form-label">Custom Date Range</label>
                            <div class="input-group">
                                <input type="date" class="form-control" id="startDate" placeholder="Start Date">
                                <span class="input-group-text">to</span>
                                <input type="date" class="form-control" id="endDate" placeholder="End Date">
                            </div>
                            <div class="mt-2">
                                <button class="btn btn-primary btn-sm" id="applyCustomRange">Apply</button>
                                <button class="btn btn-outline-secondary btn-sm ms-2" id="cancelCustomRange">Cancel</button>
                            </div>
                        </div>
                    </div>

                    <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const timeFilter = document.getElementById('timeFilter');
                        const customDateRange = document.querySelector('.custom-date-range');
                        const startDate = document.getElementById('startDate');
                        const endDate = document.getElementById('endDate');
                        const applyBtn = document.getElementById('applyCustomRange');
                        const cancelBtn = document.getElementById('cancelCustomRange');

                        // Set default dates (today and 30 days ago)
                        const today = new Date();
                        const thirtyDaysAgo = new Date();
                        thirtyDaysAgo.setDate(today.getDate() - 30);

                        // Format dates for input fields (YYYY-MM-DD)
                        function formatDate(date) {
                            const year = date.getFullYear();
                            const month = String(date.getMonth() + 1).padStart(2, '0');
                            const day = String(date.getDate()).padStart(2, '0');
                            return `${year}-${month}-${day}`;
                        }

                        // Set default values
                        startDate.value = formatDate(thirtyDaysAgo);
                        endDate.value = formatDate(today);

                        // Show/hide custom date range based on selection
                        timeFilter.addEventListener('change', function() {
                            if (this.value === 'custom') {
                                customDateRange.style.display = 'block';
                            } else {
                                customDateRange.style.display = 'none';
                                // Trigger filter change for predefined ranges
                                triggerFilterChange(this.value);
                            }
                        });

                        // Apply custom date range
                        applyBtn.addEventListener('click', function() {
                            if (!startDate.value || !endDate.value) {
                                alert('Please select both start and end dates');
                                return;
                            }

                            if (new Date(startDate.value) > new Date(endDate.value)) {
                                alert('Start date cannot be after end date');
                                return;
                            }

                            // Format the custom range value for easy parsing
                            const customValue = `custom_${startDate.value}_${endDate.value}`;
                            triggerFilterChange(customValue);
                        });

                        // Cancel custom date range
                        cancelBtn.addEventListener('click', function() {
                            customDateRange.style.display = 'none';
                            timeFilter.value = '30'; // Reset to default
                            triggerFilterChange('30');
                        });

                        // Function to trigger filter change (you can modify this based on your needs)
                        function triggerFilterChange(value) {
                            console.log('Filter changed to:', value);
                            
                            // Dispatch a custom event that other parts of your code can listen for
                            const event = new CustomEvent('timeFilterChanged', {
                                detail: { 
                                    filterValue: value,
                                    startDate: value.startsWith('custom_') ? startDate.value : null,
                                    endDate: value.startsWith('custom_') ? endDate.value : null
                                }
                            });
                            document.dispatchEvent(event);
                            
                            // Or call your existing filter function
                            // updateChartData(value);
                        }

                        // Add keyboard support
                        startDate.addEventListener('keypress', function(e) {
                            if (e.key === 'Enter') applyBtn.click();
                        });

                        endDate.addEventListener('keypress', function(e) {
                            if (e.key === 'Enter') applyBtn.click();
                        });
                    });
                    </script>

                    <style>
                    .custom-date-range {
                        border-left: 3px solid #0d6efd;
                        padding-left: 15px;
                        margin-top: 10px;
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-radius: 6px;
                    }

                    .input-group-text {
                        background-color: #e9ecef;
                        border: 1px solid #ced4da;
                    }

                    #applyCustomRange, #cancelCustomRange {
                        font-size: 0.875rem;
                        padding: 0.25rem 0.75rem;
                    }
                    </style>
                    <div class="col-md-3">
                        <div class="mb-3">
                            <label class="form-label">&nbsp;</label>
                            <button class="btn btn-primary w-100" id="applyFilters">Apply Filters</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="row">
            <div class="col-md-6 col-xl-3">
                <div class="card tilebox-one">
                    <div class="card-body">
                        <i class="fas fa-child float-end m-0 h2 text-muted"></i>
                        <h6 class="text-muted text-uppercase mt-0">Children Monitored</h6>
                        <h3 class="my-3 counter-value" data-target="1587">1,587</h3>
                        <span class="badge bg-success me-1"> +11% </span> 
                        <span class="text-muted">From last quarter</span>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-xl-3">
                <div class="card tilebox-one">
                    <div class="card-body">
                        <i class="fas fa-graduation-cap float-end m-0 h2 text-muted"></i>
                        <h6 class="text-muted text-uppercase mt-0">School Enrollment</h6>
                        <h3 class="my-3"><span class="counter-value" data-target="89">89</span><small>%</small></h3>
                        <span class="badge bg-success me-1"> +5% </span> 
                        <span class="text-muted">From last year</span>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-xl-3">
                <div class="card tilebox-one">
                    <div class="card-body">
                        <i class="fas fa-exclamation-triangle float-end m-0 h2 text-muted"></i>
                        <h6 class="text-muted text-uppercase mt-0">At-Risk Cases</h6>
                        <h3 class="my-3 counter-value" data-target="127">127</h3>
                        <span class="badge bg-danger me-1"> +8% </span> 
                        <span class="text-muted">From last month</span>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-xl-3">
                <div class="card tilebox-one">
                    <div class="card-body">
                        <i class="fas fa-hands-helping float-end m-0 h2 text-muted"></i>
                        <h6 class="text-muted text-uppercase mt-0">Interventions</h6>
                        <h3 class="my-3 counter-value" data-target="342">342</h3>
                        <span class="badge bg-success me-1"> +15% </span> 
                        <span class="text-muted">From last quarter</span>
                    </div>
                </div>
            </div>
        </div> <!-- end row -->

         <!-- Additional Charts Row -->
        <div class="row mt-3">
            <div class="col-lg-6">
                <div class="card card-body">
                    <h4 class="header-title mb-3">Work Type Distribution</h4>
                    <div id="work-type-chart" style="height: 300px;"></div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card card-body">
                    <h4 class="header-title mb-3">Education Status by Age Group</h4>
                    <div id="education-age-chart" style="height: 300px;"></div>
                </div>
            </div>
        </div>

        <!-- Detailed Metrics Row -->
        <div class="row">
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 class="text-muted text-uppercase">Birth Certificates</h6>
                        <h3 class="my-2">74%</h3>
                        <div class="progress mb-2" style="height: 6px;">
                            <div class="progress-bar bg-success" role="progressbar" style="width: 74%;" aria-valuenow="74" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p class="mb-0 text-muted">Children with birth certificates</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 class="text-muted text-uppercase">Light Work</h6>
                        <h3 class="my-2">42%</h3>
                        <div class="progress mb-2" style="height: 6px;">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: 42%;" aria-valuenow="42" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p class="mb-0 text-muted">Children engaged in light work</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 class="text-muted text-uppercase">Heavy Work</h6>
                        <h3 class="my-2">18%</h3>
                        <div class="progress mb-2" style="height: 6px;">
                            <div class="progress-bar bg-danger" role="progressbar" style="width: 18%;" aria-valuenow="18" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p class="mb-0 text-muted">Children engaged in heavy work</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card">
                    <div class="card-body text-center">
                        <h6 class="text-muted text-uppercase">Agrochemical Exposure</h6>
                        <h3 class="my-2">9%</h3>
                        <div class="progress mb-2" style="height: 6px;">
                            <div class="progress-bar bg-info" role="progressbar" style="width: 9%;" aria-valuenow="9" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <p class="mb-0 text-muted">Children exposed to agrochemicals</p>
                    </div>
                </div>
            </div>
        </div> <!-- end row -->

        <!-- Main Charts Row -->
        <div class="row mt-3">
            <div class="col-lg-6 col-xl-8">
                <div class="card card-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h4 class="header-title mb-0">Child Labor Trends by Region</h4>
                        <div class="btn-group">
                            <button type="button" class="btn btn-sm btn-outline-primary active" data-period="monthly">Monthly</button>
                            <button type="button" class="btn btn-sm btn-outline-primary" data-period="quarterly">Quarterly</button>
                            <button type="button" class="btn btn-sm btn-outline-primary" data-period="yearly">Yearly</button>
                        </div>
                    </div>
                    <div id="labor-trend-chart" style="height: 400px;"></div>
                </div>
            </div><!-- end col-->

            <div class="col-lg-6 col-xl-4">
                <div class="card card-body">
                    <h4 class="header-title mb-3">Risk Classification</h4>
                    <div id="risk-classification-chart" style="height: 400px;"></div>
                </div>
            </div><!-- end col-->
        </div> <!-- end row -->

       

       

        <!-- Detailed Data Row -->
        <div class="row mt-3">
            <div class="col-xl-7">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="header-title mb-3">Recent Monitoring Activities</h4>
                            </div>

                            <div class="activity-widget px-4" data-simplebar style="max-height: 600px;">
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-primary text-primary rounded-circle">
                                        <i class="fas fa-clipboard-check"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">New assessment</p>
                                        <p class="text-muted mb-0">Household in Eastern Region</p>
                                    </div>
                                    <p class="font-12 text-body">Today, 10:30 AM</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-danger text-danger rounded-circle">
                                        <i class="fas fa-hands-helping"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">Intervention initiated</p>
                                        <p class="text-muted mb-0">Family support program</p>
                                    </div>
                                    <p class="font-12 text-body">2 days ago</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-success text-success rounded-circle">
                                        <i class="fas fa-home"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">Household survey</p>
                                        <p class="text-muted mb-0">Completed in Ashanti Region</p>
                                    </div>
                                    <p class="font-12 text-body">3 days ago</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-success text-success rounded-circle">
                                        <i class="fas fa-school"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">School enrollment</p>
                                        <p class="text-muted mb-0">3 children enrolled in school</p>
                                    </div>
                                    <p class="font-12 text-body">Today, 08:45 AM</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-info text-info rounded-circle">
                                        <i class="fas fa-exclamation-circle"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">Risk identified</p>
                                        <p class="text-muted mb-0">Child labor case in Western Region</p>
                                    </div>
                                    <p class="font-12 text-body">Yesterday, 03:17 PM</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-warning text-warning rounded-circle">
                                        <i class="fas fa-user-graduate"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">Educational assessment</p>
                                        <p class="text-muted mb-0">Literacy test completed</p>
                                    </div>
                                    <p class="font-12 text-body">Yesterday, 12:20 PM</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-danger text-danger rounded-circle">
                                        <i class="fas fa-hands-helping"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">Intervention initiated</p>
                                        <p class="text-muted mb-0">Family support program</p>
                                    </div>
                                    <p class="font-12 text-body">2 days ago</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-info text-info rounded-circle">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">Data analysis</p>
                                        <p class="text-muted mb-0">Quarterly report generated</p>
                                    </div>
                                    <p class="font-12 text-body">4 days ago</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-success text-success rounded-circle">
                                        <i class="fas fa-home"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">Household survey</p>
                                        <p class="text-muted mb-0">Completed in Ashanti Region</p>
                                    </div>
                                    <p class="font-12 text-body">3 days ago</p>
                                </div>
                                <div class="d-flex align-items-center gap-2 py-2 border-bottom">
                                    <div class="activity-icon bg-soft-info text-info rounded-circle">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="me-auto">
                                        <p class="text-body mb-0">Data analysis</p>
                                        <p class="text-muted mb-0">Quarterly report generated</p>
                                    </div>
                                    <p class="font-12 text-body">4 days ago</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card card-body">
                            <h4 class="header-title mb-3">Child Labor Indicators</h4>
                            <div id="labor-indicators-chart" style="height: 150px;"></div>
                        </div>

                        <div class="card card-body mt-3">
                            <h4 class="header-title mb-3">Assessment Status</h4>
                            <div class="assessment-status">
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Completed Surveys</span>
                                    <span class="badge bg-success">1,245</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Pending Review</span>
                                    <span class="badge bg-warning">342</span>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>Requiring Follow-up</span>
                                    <span class="badge bg-danger">127</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span>New This Week</span>
                                    <span class="badge bg-info">58</span>
                                </div>
                            </div>
                        </div>

                        <div class="card card-body mt-3">
                            <h4 class="header-title mb-3">Regional Distribution</h4>
                            <div class="regional-distribution">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span>Ashanti Region</span>
                                    <span>28%</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span>Western Region</span>
                                    <span>22%</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span>Eastern Region</span>
                                    <span>18%</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span>Other Regions</span>
                                    <span>32%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- end col-->

            <div class="col-xl-5">
                <div class="card card-body">
                    <h4 class="header-title mb-3">Recent Risk Cases</h4>
                    <div class="table-responsive">
                        <table class="table table-bordered table-nowrap mb-0">
                            <thead>
                                <tr>
                                    <th>Case ID</th>
                                    <th>Region</th>
                                    <th>Risk Level</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>CL-2023-0876</td>
                                    <td>Western</td>
                                    <td>High</td>
                                    <td><span class="badge bg-warning">Under Review</span></td>
                                </tr>
                                <tr>
                                    <td>CL-2023-0875</td>
                                    <td>Ashanti</td>
                                    <td>Medium</td>
                                    <td><span class="badge bg-info">Intervention</span></td>
                                </tr>
                                <tr>
                                    <td>CL-2023-0874</td>
                                    <td>Eastern</td>
                                    <td>Critical</td>
                                    <td><span class="badge bg-danger">Immediate Action</span></td>
                                </tr>
                                <tr>
                                    <td>CL-2023-0873</td>
                                    <td>Central</td>
                                    <td>Low</td>
                                    <td><span class="badge bg-success">Resolved</span></td>
                                </tr>
                                <tr>
                                    <td>CL-2023-0872</td>
                                    <td>Volta</td>
                                    <td>Medium</td>
                                    <td><span class="badge bg-info">Monitoring</span></td>
                                </tr>
                                 <tr>
                                    <td>CL-2023-0877</td>
                                    <td>Ahafo</td>
                                    <td>Medium</td>
                                    <td><span class="badge bg-info">Intervention</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="card card-body mt-3">
                    <h4 class="header-title mb-3">Upcoming Interventions</h4>
                    <div class="upcoming-interventions">
                        <div class="d-flex justify-content-between align-items-center mb-3 pb-2 border-bottom">
                            <div>
                                <h6 class="mb-0">Educational Support</h6>
                                <small class="text-muted">Western Region - 5 children</small>
                            </div>
                            <span class="badge bg-primary">Tomorrow</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-3 pb-2 border-bottom">
                            <div>
                                <h6 class="mb-0">Household Sensitization</h6>
                                <small class="text-muted">Ashanti Region - 3 families</small>
                            </div>
                            <span class="badge bg-info">In 2 days</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="mb-0">Community Awareness</h6>
                                <small class="text-muted">Eastern Region - Village meeting</small>
                            </div>
                            <span class="badge bg-success">Next Week</span>
                        </div>
                    </div>
                </div>

                <!-- <div class="card card-body mt-3">
                    <h4 class="header-title mb-3">Intervention Effectiveness</h4>
                    <div id="intervention-effectiveness-chart" style="height: 200px;"></div>
                </div> -->
            </div><!-- end col-->
        </div> <!-- end row -->

        <!-- Detailed Analytics Section -->
        <div class="row mt-3">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="header-title">Detailed Child Labor Analysis</h4>
                    </div>
                    <div class="card-body">
                        <ul class="nav nav-tabs nav-bordered">
                            <li class="nav-item">
                                <a href="#demographics-tab" data-bs-toggle="tab" aria-expanded="false" class="nav-link active">
                                    Demographics
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#education-tab" data-bs-toggle="tab" aria-expanded="true" class="nav-link">
                                    Education
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#work-tab" data-bs-toggle="tab" aria-expanded="false" class="nav-link">
                                    Work Patterns
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#risk-tab" data-bs-toggle="tab" aria-expanded="false" class="nav-link">
                                    Risk Factors
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane show active" id="demographics-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5>Age Distribution</h5>
                                        <div id="age-distribution-chart" style="height: 250px;"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5>Gender Distribution by Region</h5>
                                        <div id="gender-region-chart" style="height: 250px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="education-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5>School Attendance by Age</h5>
                                        <div id="school-attendance-chart" style="height: 250px;"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5>Literacy Levels</h5>
                                        <div id="literacy-levels-chart" style="height: 250px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="work-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5>Work Hours by Age Group</h5>
                                        <div id="work-hours-chart" style="height: 250px;"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5>Task Types Distribution</h5>
                                        <div id="task-types-chart" style="height: 250px;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="risk-tab">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h5>Risk Factors Correlation</h5>
                                        <div id="risk-correlation-chart" style="height: 250px;"></div>
                                    </div>
                                    <div class="col-md-6">
                                        <h5>Intervention Effectiveness</h5>
                                        <div id="intervention-effectiveness-detailed-chart" style="height: 250px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Tables Section -->
        <div class="row mt-3">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="header-title">Child Labor Cases Overview</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-centered table-nowrap mb-0">
                                <thead>
                                    <tr>
                                        <th>Case ID</th>
                                        <th>Child Name</th>
                                        <th>Age</th>
                                        <th>Region</th>
                                        <th>Risk Level</th>
                                        <th>School Status</th>
                                        <th>Work Hours</th>
                                        <th>Last Assessment</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>CL-2023-0876</td>
                                        <td>Kofi Mensah</td>
                                        <td>14</td>
                                        <td>Western</td>
                                        <td><span class="badge bg-danger">High</span></td>
                                        <td>Not Enrolled</td>
                                        <td>28 hrs/week</td>
                                        <td>3 days ago</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary">View</button>
                                            <button class="btn btn-sm btn-info">Intervene</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>CL-2023-0875</td>
                                        <td>Ama Owusu</td>
                                        <td>12</td>
                                        <td>Ashanti</td>
                                        <td><span class="badge bg-warning">Medium</span></td>
                                        <td>Enrolled</td>
                                        <td>15 hrs/week</td>
                                        <td>1 week ago</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary">View</button>
                                            <button class="btn btn-sm btn-info">Intervene</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>CL-2023-0874</td>
                                        <td>Yaw Boateng</td>
                                        <td>15</td>
                                        <td>Eastern</td>
                                        <td><span class="badge bg-success">Low</span></td>
                                        <td>Enrolled</td>
                                        <td>10 hrs/week</td>
                                        <td>2 days ago</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary">View</button>
                                            <button class="btn btn-sm btn-info">Intervene</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>CL-2023-0873</td>
                                        <td>Abena Sarpong</td>
                                        <td>13</td>
                                        <td>Central</td>
                                        <td><span class="badge bg-danger">Critical</span></td>
                                        <td>Not Enrolled</td>
                                        <td>35 hrs/week</td>
                                        <td>5 days ago</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary">View</button>
                                            <button class="btn btn-sm btn-info">Intervene</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>CL-2023-0872</td>
                                        <td>Kwame Asante</td>
                                        <td>16</td>
                                        <td>Volta</td>
                                        <td><span class="badge bg-warning">Medium</span></td>
                                        <td>Enrolled</td>
                                        <td>18 hrs/week</td>
                                        <td>1 day ago</td>
                                        <td>
                                            <button class="btn btn-sm btn-primary">View</button>
                                            <button class="btn btn-sm btn-info">Intervene</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>


         <!-- Analytics Section -->
        <div class="row mt-3">
            <div class="col-md-6 col-xl-4">
                <div class="card card-body">
                    <h4 class="header-title mb-3">Child Demographics</h4>
                    <div id="child-demographics-chart" style="height: 300px;"></div>
                </div>
            </div>
            
            <div class="col-md-6 col-xl-4">
                <div class="card card-body">
                    <h4 class="header-title mb-3">Education Status</h4>
                    <div id="education-status-chart" style="height: 300px;"></div>
                </div>
            </div>
            
            <div class="col-md-6 col-xl-4">
                <div class="card card-body">
                    <h4 class="header-title mb-3">Work Types Analysis</h4>
                    <div id="work-types-chart" style="height: 300px;"></div>
                </div>
            </div>
        </div>
    </div> <!-- container -->
</div>

<!-- ============================================================== -->
<!-- End Page content -->
<!-- ============================================================== -->

<script>
    $(document).ready(function() {
        // Initialize counter animation
        $('.counter-value').counterUp({
            delay: 10,
            time: 1000
        });

        // Filter functionality
        $('#applyFilters').on('click', function() {
            const region = $('#regionFilter').val();
            const riskLevel = $('#riskFilter').val();
            const timePeriod = $('#timeFilter').val();
            
            // In a real application, you would make an AJAX call here
            console.log('Applying filters:', { region, riskLevel, timePeriod });
            // updateCharts(region, riskLevel, timePeriod);
            
            // Show notification
            toastr.success('Filters applied successfully');
        });

        // Chart period toggle
        $('[data-period]').on('click', function() {
            $('[data-period]').removeClass('active');
            $(this).addClass('active');
            const period = $(this).data('period');
            updateChartPeriod(period);
        });
    });

    document.addEventListener('DOMContentLoaded', function() {
        // Initialize all charts
        initLaborTrendChart();
        initRiskClassificationChart();
        initLaborIndicatorsChart();
        initWorkTypeChart();
        initEducationAgeChart();
        // initInterventionEffectivenessChart();
        initChildDemographicsChart();
        initEducationStatusChart();
        initWorkTypesChart();
        initAgeDistributionChart();
        initGenderRegionChart();
        initSchoolAttendanceChart();
        initLiteracyLevelsChart();
        initWorkHoursChart();
        initTaskTypesChart();
        initRiskCorrelationChart();
        initInterventionEffectivenessDetailedChart();

        // Resize charts on window resize
        window.addEventListener('resize', function() {
            laborTrendChart.resize();
            riskClassificationChart.resize();
            laborIndicatorsChart.resize();
            workTypeChart.resize();
            educationAgeChart.resize();
            interventionEffectivenessChart.resize();
            childDemographicsChart.resize();
            educationStatusChart.resize();
            workTypesChart.resize();
            ageDistributionChart.resize();
            genderRegionChart.resize();
            schoolAttendanceChart.resize();
            literacyLevelsChart.resize();
            workHoursChart.resize();
            taskTypesChart.resize();
            riskCorrelationChart.resize();
            interventionEffectivenessDetailedChart.resize();
        });
    });

    // Chart instances
    let laborTrendChart, riskClassificationChart, laborIndicatorsChart;
    let workTypeChart, educationAgeChart, interventionEffectivenessChart;
    let childDemographicsChart, educationStatusChart, workTypesChart;
    let ageDistributionChart, genderRegionChart, schoolAttendanceChart;
    let literacyLevelsChart, workHoursChart, taskTypesChart;
    let riskCorrelationChart, interventionEffectivenessDetailedChart;

    function initLaborTrendChart() {
        laborTrendChart = echarts.init(document.getElementById('labor-trend-chart'));
        const option = {
            tooltip: {
                trigger: 'axis',
                formatter: function(params) {
                    let result = `<div style="font-weight:bold;margin-bottom:5px">${params[0].axisValue}</div>`;
                    params.forEach(item => {
                        result += `
                        <div style="display:flex;align-items:center;margin:5px 0">
                            <span style="display:inline-block;width:10px;height:10px;border-radius:50%;background:${item.color};margin-right:5px"></span>
                            ${item.seriesName}: <strong>${item.value} cases</strong>
                        </div>`;
                    });
                    return result;
                }
            },
            legend: {
                data: ['Western Region', 'Ashanti Region', 'Eastern Region', 'Central Region', 'National Average'],
                type: 'scroll',
                orient: 'horizontal',
                bottom: 0,
                selectedMode: 'multiple',
                textStyle: {
                    fontSize: 12
                }
            },
            xAxis: {
                type: 'category',
                data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                axisLine: {
                    lineStyle: {
                        color: '#999'
                    }
                },
                axisLabel: {
                    color: '#666',
                    interval: 0,
                    rotate: 45
                },
                axisTick: {
                    alignWithLabel: true
                }
            },
            yAxis: {
                type: 'value',
                name: 'Cases Reported',
                nameLocation: 'middle',
                nameGap: 40,
                nameTextStyle: {
                    fontSize: 14,
                    fontWeight: 'bold'
                },
                axisLine: {
                    show: true,
                    lineStyle: {
                        color: '#999'
                    }
                },
                axisLabel: {
                    formatter: '{value}',
                    color: '#666'
                },
                min: 0,
                max: 100
            },
            series: [
                {
                    name: 'Western Region',
                    type: 'bar',
                    data: [45, 38, 55, 48, 56, 52, 61, 58, 54, 60, 65, 70],
                    itemStyle: {
                        color: '#3bafda'
                    }
                },
                {
                    name: 'Ashanti Region',
                    type: 'bar',
                    data: [35, 42, 38, 45, 50, 48, 52, 55, 58, 62, 60, 65],
                    itemStyle: {
                        color: '#1abc9c'
                    }
                },
                {
                    name: 'Eastern Region',
                    type: 'bar',
                    data: [25, 30, 28, 32, 35, 40, 38, 42, 45, 48, 50, 52],
                    itemStyle: {
                        color: '#f7b84b'
                    }
                },
                {
                    name: 'Central Region',
                    type: 'bar',
                    data: [15, 18, 20, 22, 25, 28, 30, 32, 35, 38, 40, 42],
                    itemStyle: {
                        color: '#e83e8c'
                    }
                },
                {
                    name: 'National Average',
                    type: 'line',
                    symbol: 'none',
                    lineStyle: {
                        width: 3,
                        type: 'dashed',
                        color: '#6c757d'
                    },
                    data: [30, 32, 35, 37, 42, 42, 45, 47, 48, 52, 54, 57],
                    tooltip: {
                        formatter: function(params) {
                            return `National Average: <strong>${params.value} cases</strong>`;
                        }
                    }
                }
            ],
            animation: true,
            animationDuration: 1500,
            animationEasing: 'cubicInOut'
        };
        laborTrendChart.setOption(option);
    }

    function initRiskClassificationChart() {
        riskClassificationChart = echarts.init(document.getElementById('risk-classification-chart'));
        const option = {
            tooltip: {
                trigger: 'item'
            },
            legend: {
                orient: 'vertical',
                right: 10,
                top: 'center'
            },
            series: [
                {
                    name: 'Risk Classification',
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    itemStyle: {
                        borderRadius: 10,
                        borderColor: '#fff',
                        borderWidth: 2
                    },
                    label: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: '18',
                            fontWeight: 'bold'
                        }
                    },
                    labelLine: {
                        show: false
                    },
                    data: [
                        { value: 35, name: 'Low Risk', itemStyle: { color: '#1abc9c' } },
                        { value: 30, name: 'Medium Risk', itemStyle: { color: '#f7b84b' } },
                        { value: 20, name: 'High Risk', itemStyle: { color: '#e83e8c' } },
                        { value: 15, name: 'Critical Risk', itemStyle: { color: '#f1556c' } }
                    ]
                }
            ]
        };
        riskClassificationChart.setOption(option);
    }

    function initLaborIndicatorsChart() {
        laborIndicatorsChart = echarts.init(document.getElementById('labor-indicators-chart'));
        const option = {
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                data: ['School Dropout', 'Light Work', 'Heavy Work', 'Hazardous Work']
            },
            yAxis: {
                type: 'value',
                name: 'Percentage',
                max: 100
            },
            series: [
                {
                    name: 'Indicator Prevalence',
                    type: 'bar',
                    data: [
                        { value: 25, itemStyle: { color: '#3bafda' } },
                        { value: 45, itemStyle: { color: '#1abc9c' } },
                        { value: 18, itemStyle: { color: '#f7b84b' } },
                        { value: 12, itemStyle: { color: '#e83e8c' } }
                    ],
                    showBackground: true,
                    backgroundStyle: {
                        color: 'rgba(180, 180, 180, 0.2)'
                    }
                }
            ]
        };
        laborIndicatorsChart.setOption(option);
    }

    function initWorkTypeChart() {
        workTypeChart = echarts.init(document.getElementById('work-type-chart'));
        const option = {
            tooltip: {
                trigger: 'item'
            },
            legend: {
                orient: 'horizontal',
                bottom: 0
            },
            series: [
                {
                    name: 'Work Type',
                    type: 'pie',
                    radius: '70%',
                    data: [
                        { value: 45, name: 'Harvesting', itemStyle: { color: '#3bafda' } },
                        { value: 25, name: 'Weeding', itemStyle: { color: '#1abc9c' } },
                        { value: 15, name: 'Transport', itemStyle: { color: '#f7b84b' } },
                        { value: 10, name: 'Processing', itemStyle: { color: '#e83e8c' } },
                        { value: 5, name: 'Other', itemStyle: { color: '#6c757d' } }
                    ],
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        workTypeChart.setOption(option);
    }

    function initEducationAgeChart() {
        educationAgeChart = echarts.init(document.getElementById('education-age-chart'));
        const option = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Enrolled', 'Not Enrolled']
            },
            xAxis: {
                type: 'category',
                data: ['5-9 years', '10-12 years', '13-15 years', '16-17 years']
            },
            yAxis: {
                type: 'value',
                name: 'Percentage'
            },
            series: [
                {
                    name: 'Enrolled',
                    type: 'bar',
                    data: [95, 88, 76, 62],
                    itemStyle: { color: '#1abc9c' }
                },
                {
                    name: 'Not Enrolled',
                    type: 'bar',
                    data: [5, 12, 24, 38],
                    itemStyle: { color: '#e83e8c' }
                }
            ]
        };
        educationAgeChart.setOption(option);
    }

    // function initInterventionEffectivenessChart() {
    //     interventionEffectivenessChart = echarts.init(document.getElementById('intervention-effectiveness-chart'));
    //     const option = {
    //         tooltip: {
    //             trigger: 'axis'
    //         },
    //         xAxis: {
    //             type: 'category',
    //             data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun']
    //         },
    //         yAxis: {
    //             type: 'value',
    //             name: 'Success Rate (%)'
    //         },
    //         series: [
    //             {
    //                 name: 'Intervention Success',
    //                 type: 'line',
    //                 data: [65, 70, 76, 80, 82, 85],
    //                 smooth: true,
    //                 lineStyle: {
    //                     width: 3,
    //                     color: '#1abc9c'
    //                 },
    //                 itemStyle: {
    //                     color: '#1abc9c'
    //                 }
    //             }
    //         ]
    //     };
    //     interventionEffectivenessChart.setOption(option);
    // }

    function initChildDemographicsChart() {
        childDemographicsChart = echarts.init(document.getElementById('child-demographics-chart'));
        const option = {
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                right: 10,
                top: 'center',
                data: ['5-9 years', '10-14 years', '15-17 years']
            },
            series: [{
                name: 'Age Groups',
                type: 'pie',
                radius: ['50%', '70%'],
                avoidLabelOverlap: false,
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '18',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: [
                    {value: 485, name: '5-9 years', itemStyle: {color: '#1abc9c'}},
                    {value: 672, name: '10-14 years', itemStyle: {color: '#3498db'}},
                    {value: 430, name: '15-17 years', itemStyle: {color: '#9b59b6'}}
                ]
            }]
        };
        childDemographicsChart.setOption(option);
    }

    function initEducationStatusChart() {
        educationStatusChart = echarts.init(document.getElementById('education-status-chart'));
        const option = {
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                data: ['Enrolled', 'Not Enrolled', 'Dropout', 'Never Attended']
            },
            yAxis: {
                type: 'value',
                name: 'Number of Children'
            },
            series: [{
                name: 'Education Status',
                type: 'bar',
                data: [1412, 89, 56, 30],
                itemStyle: {
                    color: function(params) {
                        var colorList = ['#1abc9c', '#e74c3c', '#f39c12', '#95a5a6'];
                        return colorList[params.dataIndex];
                    }
                },
                label: {
                    show: true,
                    position: 'top'
                }
            }]
        };
        educationStatusChart.setOption(option);
    }

    function initWorkTypesChart() {
        workTypesChart = echarts.init(document.getElementById('work-types-chart'));
        const option = {
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                right: 10,
                top: 'center',
                data: ['Light Work', 'Heavy Work', 'Hazardous', 'Domestic']
            },
            series: [{
                name: 'Work Types',
                type: 'pie',
                radius: ['50%', '70%'],
                avoidLabelOverlap: false,
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '14',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: [
                    {value: 45, name: 'Light Work', itemStyle: {color: '#1abc9c'}},
                    {value: 25, name: 'Heavy Work', itemStyle: {color: '#f39c12'}},
                    {value: 18, name: 'Hazardous', itemStyle: {color: '#e74c3c'}},
                    {value: 12, name: 'Domestic', itemStyle: {color: '#3498db'}}
                ]
            }]
        };
        workTypesChart.setOption(option);
    }

    function initAgeDistributionChart() {
        ageDistributionChart = echarts.init(document.getElementById('age-distribution-chart'));
        const option = {
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                data: ['5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17']
            },
            yAxis: {
                type: 'value',
                name: 'Number of Children'
            },
            series: [{
                name: 'Children',
                type: 'bar',
                data: [85, 78, 92, 88, 142, 135, 148, 156, 143, 125, 118, 95, 77],
                itemStyle: {
                    color: '#3498db'
                }
            }]
        };
        ageDistributionChart.setOption(option);
    }

    function initGenderRegionChart() {
        genderRegionChart = echarts.init(document.getElementById('gender-region-chart'));
        const option = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Boys', 'Girls']
            },
            xAxis: {
                type: 'category',
                data: ['Western', 'Ashanti', 'Eastern', 'Central', 'Volta']
            },
            yAxis: {
                type: 'value',
                name: 'Number of Children'
            },
            series: [
                {
                    name: 'Boys',
                    type: 'bar',
                    data: [320, 302, 341, 374, 290],
                    itemStyle: {color: '#3498db'}
                },
                {
                    name: 'Girls',
                    type: 'bar',
                    data: [220, 182, 191, 234, 190],
                    itemStyle: {color: '#e83e8c'}
                }
            ]
        };
        genderRegionChart.setOption(option);
    }

    function initSchoolAttendanceChart() {
        schoolAttendanceChart = echarts.init(document.getElementById('school-attendance-chart'));
        const option = {
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                type: 'category',
                data: ['5-9', '10-12', '13-15', '16-17']
            },
            yAxis: {
                type: 'value',
                name: 'Percentage'
            },
            series: [{
                name: 'Attendance Rate',
                type: 'line',
                data: [98, 92, 78, 65],
                smooth: true,
                lineStyle: {
                    width: 3,
                    color: '#1abc9c'
                },
                itemStyle: {
                    color: '#1abc9c'
                }
            }]
        };
        schoolAttendanceChart.setOption(option);
    }

    function initLiteracyLevelsChart() {
        literacyLevelsChart = echarts.init(document.getElementById('literacy-levels-chart'));
        const option = {
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                type: 'category',
                data: ['Basic', 'Intermediate', 'Advanced', 'Illiterate']
            },
            yAxis: {
                type: 'value',
                name: 'Percentage'
            },
            series: [{
                name: 'Literacy Levels',
                type: 'bar',
                data: [45, 30, 15, 10],
                itemStyle: {
                    color: function(params) {
                        var colorList = ['#1abc9c', '#3498db', '#9b59b6', '#e74c3c'];
                        return colorList[params.dataIndex];
                    }
                }
            }]
        };
        literacyLevelsChart.setOption(option);
    }

    function initWorkHoursChart() {
        workHoursChart = echarts.init(document.getElementById('work-hours-chart'));
        const option = {
            tooltip: {
                trigger: 'axis'
            },
            xAxis: {
                type: 'category',
                data: ['5-9', '10-12', '13-15', '16-17']
            },
            yAxis: {
                type: 'value',
                name: 'Hours/Week'
            },
            series: [{
                name: 'Work Hours',
                type: 'bar',
                data: [5, 12, 18, 25],
                itemStyle: {
                    color: '#f39c12'
                }
            }]
        };
        workHoursChart.setOption(option);
    }

    function initTaskTypesChart() {
        taskTypesChart = echarts.init(document.getElementById('task-types-chart'));
        const option = {
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                right: 10,
                top: 'center'
            },
            series: [{
                name: 'Task Types',
                type: 'pie',
                radius: '70%',
                data: [
                    {value: 35, name: 'Harvesting', itemStyle: {color: '#1abc9c'}},
                    {value: 25, name: 'Weeding', itemStyle: {color: '#3498db'}},
                    {value: 20, name: 'Processing', itemStyle: {color: '#9b59b6'}},
                    {value: 15, name: 'Transport', itemStyle: {color: '#f39c12'}},
                    {value: 5, name: 'Other', itemStyle: {color: '#e74c3c'}}
                ]
            }]
        };
        taskTypesChart.setOption(option);
    }

    function initRiskCorrelationChart() {
        riskCorrelationChart = echarts.init(document.getElementById('risk-correlation-chart'));
        const option = {
            tooltip: {
                trigger: 'axis'
            },
            radar: {
                indicator: [
                    {name: 'Poverty', max: 100},
                    {name: 'Education', max: 100},
                    {name: 'Family Size', max: 100},
                    {name: 'Work Hours', max: 100},
                    {name: 'Region', max: 100}
                ]
            },
            series: [{
                name: 'Risk Correlation',
                type: 'radar',
                data: [
                    {
                        value: [85, 92, 78, 90, 65],
                        name: 'High Risk',
                        itemStyle: {color: '#e74c3c'}
                    },
                    {
                        value: [45, 60, 40, 35, 50],
                        name: 'Medium Risk',
                        itemStyle: {color: '#f39c12'}
                    },
                    {
                        value: [20, 30, 25, 15, 20],
                        name: 'Low Risk',
                        itemStyle: {color: '#1abc9c'}
                    }
                ]
            }]
        };
        riskCorrelationChart.setOption(option);
    }

    function initInterventionEffectivenessDetailedChart() {
        interventionEffectivenessDetailedChart = echarts.init(document.getElementById('intervention-effectiveness-detailed-chart'));
        const option = {
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['Educational Support', 'Family Assistance', 'Community Programs', 'Policy Changes']
            },
            xAxis: {
                type: 'category',
                data: ['Q1', 'Q2', 'Q3', 'Q4']
            },
            yAxis: {
                type: 'value',
                name: 'Success Rate (%)'
            },
            series: [
                {
                    name: 'Educational Support',
                    type: 'line',
                    data: [65, 70, 75, 82],
                    smooth: true,
                    lineStyle: {color: '#1abc9c'},
                    itemStyle: {color: '#1abc9c'}
                },
                {
                    name: 'Family Assistance',
                    type: 'line',
                    data: [60, 68, 72, 78],
                    smooth: true,
                    lineStyle: {color: '#3498db'},
                    itemStyle: {color: '#3498db'}
                },
                {
                    name: 'Community Programs',
                    type: 'line',
                    data: [55, 62, 68, 75],
                    smooth: true,
                    lineStyle: {color: '#9b59b6'},
                    itemStyle: {color: '#9b59b6'}
                },
                {
                    name: 'Policy Changes',
                    type: 'line',
                    data: [50, 58, 65, 72],
                    smooth: true,
                    lineStyle: {color: '#f39c12'},
                    itemStyle: {color: '#f39c12'}
                }
            ]
        };
        interventionEffectivenessDetailedChart.setOption(option);
    }

    function updateChartPeriod(period) {
        // In a real application, you would fetch new data based on the period
        console.log('Updating charts for period:', period);
        
        // Simulate data change
        if (period === 'quarterly') {
            laborTrendChart.setOption({
                xAxis: {
                    data: ['Q1', 'Q2', 'Q3', 'Q4']
                },
                series: [
                    { data: [138, 156, 173, 195] },
                    { data: [125, 143, 165, 187] },
                    { data: [85, 95, 110, 125] },
                    { data: [55, 65, 75, 90] },
                    { data: [101, 115, 128, 145] }
                ]
            });
        } else if (period === 'yearly') {
            laborTrendChart.setOption({
                xAxis: {
                    data: ['2020', '2021', '2022', '2023']
                },
                series: [
                    { data: [520, 580, 622, 662] },
                    { data: [480, 520, 580, 620] },
                    { data: [320, 350, 390, 415] },
                    { data: [210, 240, 275, 285] },
                    { data: [382, 422, 466, 495] }
                ]
            });
        } else {
            // Monthly
            laborTrendChart.setOption({
                xAxis: {
                    data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
                },
                series: [
                    { data: [45, 38, 55, 48, 56, 52, 61, 58, 54, 60, 65, 70] },
                    { data: [35, 42, 38, 45, 50, 48, 52, 55, 58, 62, 60, 65] },
                    { data: [25, 30, 28, 32, 35, 40, 38, 42, 45, 48, 50, 52] },
                    { data: [15, 18, 20, 22, 25, 28, 30, 32, 35, 38, 40, 42] },
                    { data: [30, 32, 35, 37, 42, 42, 45, 47, 48, 52, 54, 57] }
                ]
            });
        }
    }
</script>
{% endblock %}