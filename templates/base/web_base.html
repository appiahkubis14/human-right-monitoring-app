{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>HRM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta content="Coderthemes" name="author" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="/static/assets/images/CJ_Commodities_Logo.png">

	<!-- DataTables CSS -->
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.bootstrap5.min.css">
	<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">

    <!-- Vendor css -->
    <link href="/static/assets/css/vendor.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/assets/css/ChatBotWidget.css" rel="stylesheet" type="text/css" />
    <!-- App css -->
    <link href="/static/assets/css/app.min.css" rel="stylesheet" type="text/css" id="app-style" />

    <!-- Icons css -->
    <link href="/static/assets/css/icons.min.css" rel="stylesheet" type="text/css" />

    <!-- Theme Config Js -->
    <script src="/static/assets/js/config.js"></script>
    <!-- <script src="/static/assets/css/ChatBotWidget.css"></script> -->

    

     <style>
        .card {
            margin-bottom: 24px;
            box-shadow: 0 0.75rem 1.5rem rgba(18, 38, 63, 0.03);
            border: 0;
        }
        .bg-soft {
            background-color: rgba(59, 175, 218, 0.1) !important;
        }
        .avatar-sm {
            height: 3rem;
            width: 3rem;
            line-height: 3rem;
        }

        /* Animation classes for general use */
        .animate {
            animation-duration: 0.5s;
            animation-fill-mode: both;
        }

        /* Fade animations */
        .fade-in {
            animation-name: fadeIn;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in-up {
            animation-name: fadeInUp;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Slide animations */
        .slide-in-left {
            animation-name: slideInLeft;
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(-50px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Card specific animations */
        .card-animate {
            transition: all 0.3s ease;
        }

        .card-animate:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        /* Page transition animation */
        .page-enter-active,
        .page-leave-active {
            transition: opacity 0.3s, transform 0.3s;
        }
        .page-enter,
        .page-leave-to {
            opacity: 0;
            transform: translateY(10px);
        }
        
        /* Ensure DataTables displays properly */
        .dataTables_wrapper {
            padding: 0;
        }
        table.dataTable {
            margin-top: 0 !important;
            margin-bottom: 0 !important;
        }
    </style>
</head>

<body>
    <!-- Begin page -->
    <div class="wrapper">

        {% include 'partials/sidenav.html' %}

         {% include 'partials/topbar.html' %}

        {% block content %}

        {% if messages %}
            <div class="container mt-3">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        
        {% endblock %}


        <!-- Footer Start -->
        <footer class="footer">
            <div class="page-container">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <script>document.write(new Date().getFullYear())</script> Â© Human Right Monitoring System (HRMS) <span class="fw-semibold text-decoration-underline text-primary"></span>
                    </div>
                </div>
            </div>
        </footer>
        <!-- end Footer -->
        

        <!-- ============================================================== -->
        <!-- End Page content -->
        <!-- ============================================================== -->

    </div>
    <!-- END wrapper -->

   

    <!-- Vendor js -->
    <script src="/static/assets/js/vendor.min.js"></script>
	<!-- First load jQuery, then DataTables and its extensions -->
	<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.bootstrap5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
	<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
	<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>


    <!-- App js -->
    <script src="/static/assets/js/app.js"></script>

    <!--Morris Chart-->
    <script src="/static/assets/libs/morris.js/morris.min.js"></script>
    <script src="/static/assets/libs/raphael/raphael.min.js"></script>

    <!-- Projects Analytics Dashboard App js -->
    <script src="/static/assets/js/pages/dashboard-sales.js"></script>

    <!-- DataTable initialization script -->
    <script>
    $(document).ready(function() {
        // Initialize DataTables on all tables with the 'datatable' class
        $('table.datatable').DataTable({
            responsive: true,
            dom: 'Bfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'pdf', 'print', 'colvis'
            ],
            language: {
                paginate: {
                    previous: "<i class='mdi mdi-chevron-left'>",
                    next: "<i class='mdi mdi-chevron-right'>"
                }
            },
            drawCallback: function () {
                $('.dataTables_paginate > .pagination').addClass('pagination-rounded');
            }
        });
    });
    </script>

    <script>
    // Intersection Observer for scroll animations
    document.addEventListener('DOMContentLoaded', function() {
        const animatedElements = document.querySelectorAll('.animate-on-scroll');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate');
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1
        });

        animatedElements.forEach(element => {
            observer.observe(element);
        });

        // Add animation delay to cards/stats for staggered effect
        document.querySelectorAll('.card-animate, .stat-item').forEach((el, index) => {
            el.style.animationDelay = `${index * 0.1}s`;
        });
    });
    </script>
    <!-- <script>
    window.ChatBotConfig = {
        apiUrl: 'http://localhost:8000',
        theme: 'green',
        position: 'bottom-right',
        botName: 'AI Assistant',
        welcomeMessage: "Hi! I'm your AI assistant. How can I help you today?",
        enableSound: true,
        showTypingIndicator: true
    };
</script>
<script src="/static/assets/bot-js/chatbot-widget.js"></script> -->


<!-- In your HTML template -->
<script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
<script>
    // Load configuration from your backend
    document.addEventListener('DOMContentLoaded', function() {
        const websiteId = '16def077-e5fe-4b40-abab-42a4cb2318da'; // Replace with actual website ID

        fetch(`http://172.20.10.2:5000/api/config/${websiteId}/`)
            .then(response => response.json())
            .then(config => {
                window.ChatBotConfig = config;
                // Initialize the chatbot after config is loaded
                if (typeof initChatBot === 'function') {
                    console.log('Initializing chatbot with config:', config);
                    initChatBot(config);
                }
            })
            .catch(error => {
                console.error('Failed to load chatbot config:', error);
                // Fallback to default config
                window.ChatBotConfig = {
                   apiUrl: 'http://172.20.10.2:5000',
                    websiteId: '{{ website.id }}', 
                    theme: 'green',
                    position: 'bottom-right',
                    botName: 'AI Assistant',
                    websiteId: websiteId,
                    // websiteId: '{{ website.id }}',
                };
                if (typeof initChatBot === 'function') {
                    console.log('Initializing chatbot with default config:', window.ChatBotConfig);
                    initChatBot(window.ChatBotConfig);
                }
            });
    });
</script>
<script src="/static/assets/bot-js/chatbot-widget.js"></script>
</body>

</html>